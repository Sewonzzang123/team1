<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mappers.MypageDAO-mapper">

	<select id="getCate"
		resultType="com.my.maintest.board.vo.BcategoryVO">
		select catnum,catname,btype
		from bcategory
		order by catnum
	</select>

	<delete id="delBoard" parameterType="string">
		delete bcategory where
		catnum=${catnum}
	</delete>

	<insert id="createBoard">


		insert into bcategory
		values(bnum_seq.NEXTVAL,'새게시판','blog')
	</insert>

	<update id="setBoard"
		parameterType="com.my.maintest.board.vo.BcategoryVO">
		update bcategory set catname = #{catname},
		btype=#{btype} where catnum=#{catnum}
	</update>

	<update id="modify"
		parameterType="com.my.maintest.member.vo.MemberVO">
		update member set nickname=#{nickname}, tel=#{tel}
		where
		id=#{id}
	</update>

	<update id="changePW" parameterType="string">
		update member set pw=#{pw}
		where id=#{id}
	</update>

	<delete id="withdraw" parameterType="string">
		delete member where id =
		#{id}
	</delete>

	<select id="mylist" parameterType="map"
		resultType="com.my.maintest.mypage.vo.MylistVO">
		select * from(select LNUM , LNAME, CDATE, ucode,
		row_number() over( order by LNUM desc) as num from list where
		ucode=#{ucode}) where num between #{str_num} and #{end_num}
	</select>

	<select id="total_list" parameterType="string" resultType="int">
		select count(*) from list
		where ucode=#{ucode}
	</select>

	<delete id="del_list" parameterType="string">
		delete list where lnum =
		#{lnum}
	</delete>

	<select id="get_category"
		resultType="com.my.maintest.mypage.vo.IcategoryVO">
		select * from I_CATEGORY
	</select>

	<select id="get_listing" parameterType="string"
		resultType="com.my.maintest.mypage.vo.ListingVO">
		select * from listing t1, ITEM t2, I_CATEGORY t3 where
		t1.I_NUM = t2.I_NUM and t2.ca_num = t3.ca_num and lnum=#{lnum}
	</select>

	<select id="total_item" parameterType="string" resultType="int">
		select count(*) from listing t1, ITEM t2 where t1.I_NUM =
		t2.I_NUM and
		lnum=#{lnum}
	</select>

	<select id="checked_item" parameterType="string"
		resultType="int">
		select count(*) from listing t1, ITEM t2 where t1.I_NUM =
		t2.I_NUM and
		lnum=#{lnum} and checked='true'
	</select>

</mapper>