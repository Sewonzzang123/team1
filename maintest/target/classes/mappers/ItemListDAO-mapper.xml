<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mappers.ItemListDAO-mapper">
	<!-- 아이템 카테고리 전체 조회 -->
	<select id="selectAllCategory"
		resultType="com.my.maintest.item.vo.ItemCategoryVO">
		select ca_num, ca_name
		from i_category
	</select>

	<!-- 선택한 카테고리의 아이템 전체 조회 불러오기x-->
	<select id="selectAllItem"
		resultType="com.my.maintest.item.vo.ItemVO">
		select t2.ca_num as "itemCategoryVO.ca_num",
		t2.ca_name as "itemCategoryVO.ca_name",
		t1.i_num,
		t1.i_name,
		t1.i_description
		from item t1, i_category t2
		where t1.ca_num = t2.ca_num
		<![CDATA[and t1.i_num <1000]]>
	</select>
	
	<!-- 사용자의 리스트 목록 불러오기 -->
	<select id="loadItemList" parameterType="String" resultType="com.my.maintest.item.vo.ListVO">
	select 
		t1.l_num,
		t1.ucode as "memberVO.ucode",
		t1.l_name,
		t1.i_list,
		t1.cdate
		from list t1, member t2
		where t1.ucode = t2.ucode
		and t2.ucode = #{ucode}
	
	</select>

		<!-- 사용자의 리스트 이름만 불러오기 -->
	<select id="loadList" parameterType="String" resultType="com.my.maintest.item.vo.ListVO">
    select 
		distinct t1.lnum,
		t1.ucode as "memberVO.ucode",
		t1.lname
		from list t1, member t2
		where t1.ucode = t2.ucode
		and t2.ucode = #{ucode}
	</select>
	
	<!-- 리스트 저장 : 이름 생성하기 -->
	<insert id="listNameInsert" parameterType="Map">
		 insert into list(lnum, ucode, lname)
    values(lnum_seq.nextval, #{ucode}, #{lname})	
	</insert>
	
	<!-- 이름이 저장된 리스트 번호 가져오기 -->
	<select id="getNum" parameterType="Map" resultType="int">
		select 
				lnum  
    from list
    where ucode=#{ucode}
		and lname=#{lname}
	</select>
</mapper>
